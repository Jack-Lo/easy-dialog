"use strict";!function(e){var t={cElm:function(e){if("object"==typeof e){var t,n=document.createElement(e.tag||"div");for(t in e)n[t]=e[t]}else n=document.createElement(e||"div");return n},setStyle:function(e,t){function n(e,t){var n=e.length-t.length;return n>=0&&e.indexOf(t,n)==n}var o=e.style,a=o.cssText;return n(a,";")||(a+=";"),o.cssText=a+t,e},addEvent:function(e,t,n){if(window.addEventListener){e.addEventListener(t,n,!1);var o=document.createEvent("HTMLEvents");o.initEvent(t,!1,!1),e["ev"+t]||(e["ev"+t]=o)}else if(window.attachEvent){e.attachEvent("on"+t,n),isNaN(e["cu"+t])&&(e["cu"+t]=0);var a=function(o){o.propertyName=="cu"+t&&n.call(e)};e.attachEvent("onpropertychange",a),e["ev"+t]?e["ev"+t].push(a):e["ev"+t]=[a]}return this},removeEvent:function(e,t,n){if(window.removeEventListener)e.removeEventListener(t,n,!1);else if(document.attachEvent){e.detachEvent("on"+t,n);var o=e["ev"+t];if(o instanceof Array)for(var a=0;a<o.length;a+=1)e.detachEvent("onpropertychange",o[a])}return this},drag:function(e,t){e.style.cursor="move",e.onmousedown=function(e){function n(e){var n=e||event,o=n.clientX-i,a=n.clientY-l;t.style.left=o+"px",t.style.top=a+"px"}function o(){document.onmousemove=null,document.onmouseup=null}var a=e||event,i=a.clientX-t.offsetLeft,l=a.clientY-t.offsetTop;document.onmousemove=n,document.onmouseup=o}}},n=function(e){switch(this.cfg={id:e.id||null,skin:e.skin,boxTop:e.boxTop,boxWidth:e.boxWidth,boxHeight:e.boxHeight,boxPosition:e.boxPosition,title:e.title||"",closeBtn:"undefined"==typeof e.closeBtn?!0:e.closeBtn,container:e.container||document.body,content:e.content||"",footer:e.footer||"",footerType:e.footerType||"none",footerAlign:e.footerAlign,mark:e.mark||"备注: 无",button:e.button||"single",btnType:e.btnType||"input",sureBtnHandler:e.sureBtnHandler,cancelBtnHandler:e.cancelBtnHandler,closeBtnHandler:e.closeBtnHandler,model:e.model||"dialog",draggable:"undefined"==typeof e.draggable?!1:e.draggable,showAnimation:e.showAnimation,hideAnimation:e.hideAnimation,overlay:"undefined"==typeof e.overlay?!0:e.overlay,overlayType:e.overlayType,stayTime:e.stayTime||1800,autoDelete:e.autoDelete},this.handlers={},this.cfg.model){case"message":i(this);break;case"loading":l(this);break;default:a(this)}};n.prototype={box:null,on:function(e,t){var n=this.handlers;n[e]||(n[e]=new Array),this.handlers[e].push(t)},fire:function(e){var t=this.handlers;if(t[e])for(var n=0;n<t[e].length;n++)t[e][n]()},render:function(){},crt:function(){var e=this.cfg;this.box=this.render(),e.container.appendChild(this.box),this.fire("crt")},del:function(){this.box.parentNode.removeChild(this.box),this.fire("del")},dstr:function(){t=null,o=null,n=null,a=null,i=null,l=null}};var o=t,a=function(e){var t,n,a,i,l,r,s,c,d,u=e.cfg;e.render=function(){if(t=o.cElm({id:u.id,className:u.skin||"alt"}),u.boxTop&&function(){o.setStyle(t,"top:"+u.boxTop+";position:"+u.boxPosition)}(),n=o.cElm({className:"main_box"}),u.boxWidth&&function(){o.setStyle(n,"width:"+u.boxWidth+";margin-left:-"+(parseInt(u.boxWidth)/2+1)+"px")}(),a=o.cElm({className:"header",innerHTML:"<div>"+u.title+"</div>"}),u.draggable&&o.drag(a,t),u.closeBtn&&(i=o.cElm({tag:"span",className:"close_btn",innerHTML:"×",onclick:function(){u.closeBtnHandler&&u.closeBtnHandler(),e.del()}}),a.appendChild(i)),l=o.cElm({className:"container",innerHTML:u.content}),u.boxHeight&&function(){o.setStyle(l,"height:"+(parseInt(u.boxHeight)-26-10-30-10-2)+"px")}(),r=o.cElm({className:"footer"}),""==u.footer)switch(u.footerType){case"none":break;case"mark":c=o.cElm({className:"mark",innerHTML:u.mark}),u.footerAlign&&o.setStyle(c,"text-align:"+u.footerAlign),r.appendChild(c);break;case"button":d=o.cElm({className:"button"}),u.footerAlign&&o.setStyle(d,"text-align:"+u.footerAlign);var p=u.button;if("single"==p){var f=o.cElm({tag:"input",type:"button",className:"btn sure",value:"确定",onclick:function(){u.sureBtnHandler&&u.sureBtnHandler(),e.del()}});d.appendChild(f)}else if("couple"==p){var f=o.cElm({tag:"input",type:"button",className:"btn sure",value:"确定",onclick:function(){u.sureBtnHandler&&u.sureBtnHandler(),e.del()}}),h=o.cElm({tag:"input",type:"button",className:"btn cancel",value:"取消",onclick:function(){u.cancelBtnHandler&&u.cancelBtnHandler(),e.del()}});d.appendChild(f),d.appendChild(h)}else d.innerHTML=p;r.appendChild(d)}else r.innerHTML=u.footer;if(u.overlay){var m="";if(u.overlayType)switch(u.overlayType){case"grey":m="alt_overlay";break;case"pure":m="alt_overlay_pure"}else m="alt_overlay";s=o.cElm({className:m}),t.appendChild(s)}return n.appendChild(a),n.appendChild(l),n.appendChild(r),t.appendChild(n),t}},i=function(e){var t,n,a,i,l=e.cfg;switch(e.render=function(){if(t=o.cElm({id:l.id,className:l.skin||"alt_message"}),l.boxTop&&function(){o.setStyle(t,"top:"+l.boxTop+";position:"+l.boxPosition)}(),n=o.cElm({className:"main_box"}),l.boxWidth&&function(){o.setStyle(n,"width:"+l.boxWidth+";margin-left:-"+(parseInt(l.boxWidth)/2+1)+"px")}(),a=o.cElm({tag:"span",className:"container",innerHTML:l.content}),l.boxHeight&&function(){o.setStyle(a,"height:"+(parseInt(l.boxHeight)-26-10-30-10-2)+"px")}(),l.overlay){var e="";if(l.overlayType)switch(l.overlayType){case"grey":e="alt_overlay";break;case"pure":e="alt_overlay_pure"}else e="alt_overlay_pure";i=o.cElm({className:e}),t.appendChild(i)}return n.appendChild(a),t.appendChild(n),t},l.autoDelete){case!1:break;default:e.on("crt",function(){setTimeout(function(){e.del()},l.stayTime)})}},l=function(e){var t,n,a,i,l=e.cfg;e.render=function(){if(t=o.cElm({id:l.id,className:l.skin||"alt_loading"}),l.boxTop&&function(){o.setStyle(t,"top:"+l.boxTop+";position:"+l.boxPosition)}(),n=o.cElm({className:"main_box"}),l.boxWidth&&function(){o.setStyle(n,"width:"+l.boxWidth+";margin-left:-"+(parseInt(l.boxWidth)/2+1)+"px")}(),a=o.cElm({className:"container"}),l.boxHeight&&function(){o.setStyle(a,"height:"+(parseInt(l.boxHeight)-26-10-30-10-2)+"px")}(),l.overlay){var e="";if(l.overlayType)switch(l.overlayType){case"grey":e="alt_overlay";break;case"pure":e="alt_overlay_pure"}else e="alt_overlay_pure";i=o.cElm({className:e}),t.appendChild(i)}return n.appendChild(a),t.appendChild(n),t}};e.alt=n}(window);